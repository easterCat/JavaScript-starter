## hosts 文件的作用

hosts 文件是一个没有扩展名的系统文件，可以用记事本等工具打开，作用就是将一些常用的网址域名与其对应的 IP 地址建立一个关联“数据库”，当用户在浏览器中输入一个需要登录的网址时，系统会首先自动从 Hosts 文件中寻找对应的 IP 地址，一旦找到，系统会立即打开对应网页，如果没有找到，则系统会再将网址提交 DNS 域名解析服务器进行 IP 地址的解析。
Hosts 文件配置的映射是静态的，如果网络上的计算机更改了需要及时更新 IP 地址，否则将不能访问。

- 加快域名解析,对于要经常访问的网站，可以通过在 Hosts 中配置域名和 IP 的映射关系，这样当输入域名计算机就能很快解析出 IP，而不用请求网络上的 DNS 服务器
- 方便局域网用户,在很多单位的局域网中，会有服务器提供给用户使用。但由于局域网中一般很少架设 DNS 服务器，访问这些服务要输入难记的 IP 地址，对不少人来说相当麻烦。现在可以分别给这些服务器取个容易记住的名字，然后在 Hosts 中建立 IP 映射，这样以后访问的时候我们输入这个服务器的名字就行了
- 屏蔽网站,现在有很多网站不经过用户同意就将各种各样的插件安装到计算机中，有些说不定就是木马或病毒。对于这些网站可以利用 Hosts 把该网站的域名映射到错误的 IP 或自己计算机的 IP，这样就不用访问了
- 顺利连接系统,对于 Lotus 的服务器和一些数据库服务器，在访问时如果直接输入 IP 地址那是不能访问的，只能输入服务器名才能访问。那么配置好 Hosts 文件，这样输入服务器名就能顺利连接了。
  最后要指出的是，Hosts 文件配置的映射是静态的，如果网络上的计算机更改了请及时更新 IP 地址，否则将不能访问
- 强制指定某域名对应某 IP 地址,新建的网站已经上传到服务器需要调试但是还不想外布访问，或者不想被蜘蛛抓取到时，可以修改本地 hosts 文件，这样只有自己的电脑能通过域名来访问网站

#### hosts 位置

C:\windows\system32\drivers\etc

#### 添加 hosts

按照 ip 地址 域名 的格式添加单独的一行记录 182.61.171.72 www.axure.com , ip 地址和域名之间，要有至少 1 个空格

## localhost 和 127.0.0.1

localhost 是一个域名，127.0.0.1 为 IP 地址。Windows 系统中，约定 127.0.0.1 为本地 IP 地址。localhost 是其对应的域名。配置是在 hosts 文件中设置的，Windows 下该文件位置为：C:\Windows\System32\drivers\etc 目录下 hosts 文件

## HTTP 请求过程

- 首先在浏览器中输入网址
- 浏览器根据域名解析 IP 地址
- 浏览器根据解析的 IP 地址与 web 服务器建立一个 TCP 连接
- 浏览器给服务器发送 HTTP 请求
- 服务器的永久重定向响应
- 浏览器跟踪重定向地址
- 服务器处理请求
- 服务器发回一个 HTTP 响应
- 释放 TCP 连接
- 客户端浏览器解析 HTML 内容

其中的第二步就和上面提到的 hosts 文件有很重要的联系。浏览器访问网站，要首先通过 DNS 服务器把要访问的网站域名解析成一个唯一的 IP 地址，之后，浏览器才能对此网站进行定位并且访问其数据。
在引入 DNS（Domain Name System，域名系统）之前，网络中的主机是将容易记忆的域名映射到 IP 地址并将它保存在一个共享的静态文件 hosts 中，再由 hosts 文件来实现网络中域名的管理。最初 Internet 非常小，仅使用这个集中管理的文件就可以通过 FTP 为连入 Internet 的站点和主机提供域名的发布和下载。每个 Internet 站点将定期地更新其主机文件的副本，并且发布主机文件的更新版本来反映网络的变化。
但是，当 Internet 上的计算机迅速增加时，通过一个中心授权机构为所有 Internet 主机管理一个主机文件的工作将无法进行。文件会随着时间的推移而增大，这样按当前和更新的形式维持文件以及将文件分配至所有站点将变得非常困难，甚至无法完成，于是才有了 DNS 服务器。
操作系统规定，在进行 DNS 请求以前，先检查自己的 Hosts 文件中是否有这个域名和 IP 的映射关系。如果有，则直接访问这个 IP 地址指定的网络位置，如果没有，再向已知的 DNS 服务器提出域名解析请求。也就是说 Hosts 的 IP 解析优先级比 DNS 要高。

## 127.0.0.1 和 0.0.0.0 地址的区别

我平时在进行网络编程时，会将服务器的 IP 地址设置为 127.0.0.1。然后绑定端口，开始监听。但是对于服务器来说，除了 127.0.0.1，还有内网 IP 和公网 IP，绑定本地的话只能局域网传输,所以，应该怎么绑定？

先复习一下 IP 类型：

- IP 地址一共分为 5 类，即 A ～ E，它们分类的依据是其 net-id 所占的字节长度以及网络号前几位。
- A 类地址:网络号占 1 个字节。网络号的第一位固定为 0。
- B 类地址：网络号占 2 个字节。网络号的前两位固定为 10。
- C 类地址：网络号占 3 个字节。网络号的前三位固定位 110。
- D 类地址：前四位是 1110，用于多播(multicast)，即一对多通信。
- E 类地址：前四位是 1111，保留为以后使用。

还有些特殊地址：

- 127.0.0.1：回环地址。该地址指电脑本身，主要预留测试本机的 TCP/IP 协议是否正常。只要使用这个地址发送数据，则数据包不会出现在网络传输过程中。
- 10.x.x.x、172.16.x.x ～ 172.31.x.x、192.168.x.x：这些地址被用做内网中。用做私网地址，这些地址不与外网相连。
- 255.255.255.255：广播地址
- 0.0.0.0：这个 IP 地址在 IP 数据报中只能用作源 IP 地址，这发生在当设备启动时但又不知道自己的 IP 地址情况下。

由此看，两个都属于特殊地址。

IPV4 中，0.0.0.0 地址被用于表示一个无效的，未知的或者不可用的目标。

- 在服务器中，0.0.0.0 指的是本机上的所有 IPV4 地址，如果一个主机有两个 IP 地址，192.168.1.1 和 10.1.2.1，并且该主机上的一个服务监听的地址是 0.0.0.0,那么通过两个 ip 地址都能够访问该服务。
- 在路由中，0.0.0.0 表示的是默认路由，即当路由表中没有找到完全匹配的路由的时候所对应的路由。

用途：

- DHCP 分配前，表示本机。
- 用做默认路由，表示任意主机。
- 用做服务端，表示本机的任意 IPV4 地址。

#### localhost:

只是一个域名，可以代表任何 IP 地址。默认是 127.0.0.1 ,在/etc/hosts 文件下。
在实际应用中，一般我们在服务端绑定端口的时候可以选择绑定到 0.0.0.0，这样我的服务访问方就可以通过我的多个 ip 地址访问我的服务。
比如我有一台服务器，一个外网 A,一个内网 B，如果我绑定的端口指定了 0.0.0.0，那么通过内网地址或外网地址都可以访问我的应用。
